<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>WEBSERVER</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
    crossorigin=""/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  </head>
  <body>
    <header>
      <img id="logo" src="UN - Logo Small.png" alt="Logo de la empresa">
      <h1 id="h">FLEET TRACKING SERVICE</h1>
    </header>
    <main>
      <!--Create the table-->
      <div id="table">
        <ul id="data-list">
          <li>LATITUD: <span id="data1"></span></li>
          <li>LONGITUD: <span id="data2"></span></li>
          <li>FECHA: <span id="data3"></span></li>
          <li>HORA: <span id="data4"></span></li>
          <li>LATITUD NUEVA: <span id="latitud1"></span></li>
          <li>LONGITUD NUEVA: <span id="longitud1"></span></li> 
          <li>RESULTADO: <span id="da"></span></li> 
        </ul>
       <script src="udp.js"></script>
       
      </div>
      <!--Create the calendar-->
      <div id="Cal">
        <form>
          <label for="fecha_inicio">Fecha inicio:</label>
          <input type="date" id="fecha_inicio" name="fecha_inicio">
          <br>
          <label for="fecha_final">Fecha final:</label>
          <input type="date" id="fecha_final" name="fecha_final">
          <br>
          <label for="hora_inicio">Hora inicio:</label>
          <input type="time" id="hora_inicio" name="hora_inicio">
          <br>
          <label for="hora_final">Hora final:</label>
          <input type="time" id="hora_final" name="hora_final">
          <br><br>
          <button type="button" onclick="consultar()">Consultar</button>
        </form>
        <script>
          function consultar() {
            const fecha_inicio = document.getElementById("fecha_inicio").value;
            const fecha_final = document.getElementById("fecha_final").value;
            const hora_inicio = document.getElementById("hora_inicio").value;
            const hora_final = document.getElementById("hora_final").value;
            
            const url = `/consultar?fecha_inicio=${fecha_inicio}&fecha_final=${fecha_final}&hora_inicio=${hora_inicio}&hora_final=${hora_final}`;
            fetch(url)
              .then(response => response.json())
              .then(data => {
                console.log(data);
              })
              .catch(error => {
                console.error(error);
              });
          }
        </script>
      </div>
      <!--Create the map-->
      <div id="m">      
        <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
        integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
        crossorigin=""></script>
        <div id="map"></div>
        <script src="map.js"></script>
       </div>
       <div id="result-container">
        <h2>¿Cuándo estuvo el vehiculo?:</h2>
        <ul id="result-list"></ul>
       </div>
       
    </main>
  </body>
</html>
